<main>
  <app-content-header
    title="Pessoas"
    btn_label="Novo"
    fontIcon="add"
    (onClick)="handleOpenForm()"
  />

  @if (personPaginatedList?.totalElements) {
  <app-table
    (selectedPerson)="handleSelectedPerson($event)"
    [personPaginatedList]="personPaginatedList!"
    (pageEvent)="handlePageEvent($event)"
  />
  } @else {
    @if (!clientListError) {
      <div class="loader-div">
        <span class="loader"></span>
      </div>
    } @else {
      <div class="message-error mat-elevation-z8">
        <h3>Não foi possível acessar os dados da tabela</h3>
        <h4>Tente novamente em alguns minutos.</h4>
      </div>
    }
  }


  @if (openForm()) {
  <app-drawer (closeForm)="handleOpenForm()">
    <mat-tab-group [selectedIndex]="selectedPerson?.person?.cpf ? 0 : 1">
      <mat-tab label="Pessoa Física">
        <app-create-natural-person-form
          [dataForm]="selectedPerson?.person?.cpf ? selectedPerson : null"
        />
      </mat-tab>
      <mat-tab label="Pessoa Jurídica">
        <app-create-legal-entity-form
          [dataForm]="selectedPerson?.person?.cnpj ? selectedPerson : null"
        />
      </mat-tab>
    </mat-tab-group>
  </app-drawer>
  }
</main>
